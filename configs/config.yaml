# ============================================
# Main Configuration File
# ============================================

# Data paths
data:
  base_path: "data/"
  metadata_file: "HAM10000_metadata.csv"
  image_dirs:
    - "HAM10000_images_part_1"
    - "HAM10000_images_part_2"
  output_path: "outputs/"

# Dataset split ratios
split:
  train_ratio: 0.70
  val_ratio: 0.15
  test_ratio: 0.15
  stratify: true
  maintain_lesion_integrity: true
  random_seed: 42

# Image preprocessing
preprocessing:
  target_size: [224, 224]
  normalization: "imagenet"  # Options: "imagenet", "simple" ([0,1]), null
  enhance_contrast: true
  contrast_factor: 1.2
  use_clahe: false
  clahe_clip_limit: 2.0
  clahe_tile_size: [8, 8]

# Data augmentation (training only)
augmentation:
  enabled: true
  horizontal_flip: true
  vertical_flip: false
  rotation_range: 20  # degrees
  brightness_range: [0.8, 1.2]
  zoom_range: 0.1
  width_shift_range: 0.1
  height_shift_range: 0.1
  fill_mode: "constant"

# Class balancing
balancing:
  method: "oversample"  # Options: "oversample", "undersample", "class_weights", "smote"
  target_samples: "max"  # Options: "max", "mean", or specific number
  use_class_weights: true
  augment_rare_classes: true
  rare_class_threshold: 0.05  # Classes below 5% are considered rare

# Model training
training:
  model_name: "resnet50"  # Options: "resnet18", "resnet50", "efficientnet_b0", etc.
  pretrained: true
  freeze_backbone: false
  epochs: 50
  batch_size: 32
  learning_rate: 0.001
  optimizer: "adam"  # Options: "adam", "sgd", "adamw"
  scheduler: "reduce_on_plateau"  # Options: "step", "cosine", "reduce_on_plateau"
  early_stopping_patience: 10
  save_best_only: true

# Loss function
loss:
  type: "cross_entropy"  # Options: "cross_entropy", "focal_loss", "label_smoothing"
  use_class_weights: true
  label_smoothing: 0.0
  focal_loss_gamma: 2.0
  focal_loss_alpha: null

# Evaluation metrics
metrics:
  - "accuracy"
  - "precision"
  - "recall"
  - "f1_score"
  - "auc_roc"
  - "confusion_matrix"

# Visualization
visualization:
  save_plots: true
  plot_format: "png"
  plot_dpi: 300
  show_plots: false  # Set to true for interactive mode
  
# Logging
logging:
  use_wandb: false
  wandb_project: "skin-lesion-classification"
  wandb_entity: null
  log_interval: 10  # Log every N batches
  save_checkpoint_interval: 5  # Save every N epochs

# Hardware
hardware:
  device: "auto"  # Options: "auto", "cuda", "cpu", "mps"
  num_workers: 4
  pin_memory: true
  mixed_precision: false

# Reproducibility
reproducibility:
  seed: 42
  deterministic: true
  benchmark: false
